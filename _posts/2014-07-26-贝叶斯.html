---
layout: post
title: "贝叶斯"
category: "算法"
---

<div style="line-height: 1.5; color: #2c3f51;">
<div></div>
<div>
</div><div>

<p style="margin: 0 0 1.1em;"></p>
<div><div><div>
<ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none;">
<li><a style="background: transparent; color: #1980e6; text-decoration: none;">贝叶斯</a><ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none;">
<li><a style="background: transparent; color: #1980e6; text-decoration: none;">1. 贝叶斯定理</a></li>
<li><a style="background: transparent; color: #1980e6; text-decoration: none;">2. 贝叶斯定理的应用</a><ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none;">
<li><a style="background: transparent; color: #1980e6; text-decoration: none;">2.1 拼写纠正问题</a><ul style="margin-top: 0; margin-bottom: 15px; list-style-type: none;">
<li><a style="background: transparent; color: #1980e6; text-decoration: none;">最大似然 &amp; 奥卡姆剃刀</a></li>
</ul>
</li>
<li><a style="background: transparent; color: #1980e6; text-decoration: none;">2.2 垃圾邮件过滤器</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div></div><div>
<h2 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 2.15em; margin: 1.2em 0; text-align: start;">1. 贝叶斯定理</h2>
<p style="margin: 0 0 1.1em;">贝叶斯定理是一个关于 <strong style="font-weight: bold;">条件概率</strong> 的公式。所谓”条件概率”（Conditional probability），就是指在事件B发生的情况下，事件A发生的概率，用 <span><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="14.875" longdesc="__SVG__a29c451177f7436787c2035d3614ea3f" name="7b469519-30b3-40ac-834b-7765c52e3118" src="/assets/img/1674e58cdaa2c3606f43afed4b6c2c04" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="45.5"/></span></span></span> 来表示。</p>
<p style="margin: 0 0 1.1em;">先来看一个问题：</p>
<blockquote style="padding: 15px 20px; margin: 0 0 1.1em; border-left: 5px solid rgba(102,128,153,0.075); border-left-width: 10px; background-color: rgba(102,128,153,0.05); border-top-right-radius: 5px; border-bottom-right-radius: 5px;">
<p style="margin: 0 0 1.1em; font-size: 1em; font-weight: 300; line-height: 1.45; margin-bottom: 0;">两个一模一样的碗，一号碗有30颗水果糖和10颗巧克力糖，二号碗有水果糖和巧克力糖各20颗。随机选择一个碗并从中摸一颗糖，求抽到1号碗且摸到的是水果糖的概率。</p>
</blockquote>
<p style="margin: 0 0 1.1em;">如果把 <strong style="font-weight: bold;">“抽到1号碗” 称为事件 A，“摸到水果糖” 称为事件 B</strong>，问题即求 A/B 两个事件同时发生的概率 <span><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="14.875" longdesc="__SVG__41b23d95c29c2343c9f8c9ddbc40eacf" name="9fad3bc3-0343-42e0-b9a9-722ecde0972d" src="/assets/img/d004f49b7b9fdb53f8e10d05f36ed7d1" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="42"/></span></span></span>，很明显结果等于 <code style="font-family: Source Code Pro,monospace; font-size: .9em; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: normal; border-radius: 4px;">抽到1号碗的概率 * 抽到1号碗后，在1号碗中摸到水果糖的概率</code>：</p>
</div><div>
<p style="margin: 0 0 1.1em;"></p><div><div style="text-align: center; margin: 1em 0; position: relative; display: block; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%;"><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="15.75" longdesc="__SVG__d06d936ef4632bc132eff36b2a2838a3" name="5911d579-5382-4481-a7d2-2c988426d8ad" src="/assets/img/df3c6bf78510431b27b6a71c526e4e8b" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="270.375"/></span></span></div></div><p style="margin: 0 0 1.1em;"></p>
<p style="margin: 0 0 1.1em;">现在换一种问法：</p>
<blockquote style="padding: 15px 20px; margin: 0 0 1.1em; border-left: 5px solid rgba(102,128,153,0.075); border-left-width: 10px; background-color: rgba(102,128,153,0.05); border-top-right-radius: 5px; border-bottom-right-radius: 5px;">
<p style="margin: 0 0 1.1em; font-size: 1em; font-weight: 300; line-height: 1.45; margin-bottom: 0;">随机选择一个碗，从中摸出一颗糖，发现是水果糖。请问这颗水果糖来自一号碗的概率有多大？</p>
</blockquote>
<p style="margin: 0 0 1.1em;">问题变成了求 事件B（从两个碗中摸到水果糖）发生的前提下，事件A（抽到1号碗）的概率，即条件概率 <span><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="14.875" longdesc="__SVG__58c27d7d54c494a3d7e91f398e0e8059" name="7b469519-30b3-40ac-834b-7765c52e3118" src="/assets/img/1674e58cdaa2c3606f43afed4b6c2c04" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="45.5"/></span></span></span>。在之前公式的基础上进行推导：</p>
</div><div>
<p style="margin: 0 0 1.1em;"></p><div><div style="text-align: center; margin: 1em 0; position: relative; display: block; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%;"><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="14.875" longdesc="__SVG__3dddbbc4d20326ebae0b3ac425b41c5c" name="45d91a5d-12d8-4ec2-9992-ef96a8c70fe3" src="/assets/img/e12a04e88a23f3d35b3ed87cf970702f" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="159.25"/></span></span></div></div>
<div><div style="text-align: center; margin: 1em 0; position: relative; display: block; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%;"><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="14.875" longdesc="__SVG__c8f22475110f0679056df35fa624059b" name="466a4e37-63e1-4d2b-a44d-a9efe4ba90ab" src="/assets/img/04b1bb3b0e477477ddb4b041a8968951" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="159.25"/></span></span></div></div>
<div><div style="text-align: center; margin: 1em 0; position: relative; display: block; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%;"><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="14.875" longdesc="__SVG__091d43906eeabd20fc4273e29803f6ee" name="b895c760-db47-4658-815b-a5dc77748547" src="/assets/img/213e63e95f02e961bf33db05a6be73d1" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="105.875"/></span></span></div></div>
<div><div style="text-align: center; margin: 1em 0; position: relative; display: block; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%;"><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="38.5" longdesc="__SVG__78185875879f43d33b2fc0eb345c2117" name="73841818-dea2-4e30-b0f7-ad0ccafc43f6" src="/assets/img/00360572f48a053b612f282605a4e966" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="350"/></span></span></div></div><p style="margin: 0 0 1.1em;"></p>
<ol style="margin-top: 0; margin-bottom: 1.1em;"><li><span><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="14.875" longdesc="__SVG__a900fc42abad5f1a1acd2dcbe8475f20" name="7f315cf8-ee1c-45a9-a1d5-8dae35b60258" src="/assets/img/27a57d901b5e7cb8f2695a2a262b57c7" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="32.375"/></span></span></span> : 抽到1号碗的概率</li>
<li><span><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="14.875" longdesc="__SVG__f540bd123ed34dd8062b411239b91955" name="db773a20-17ec-47df-9119-9386e7f6b7a1" src="/assets/img/c1501cf023321ad809be4d36efe64be9" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="32.375"/></span></span></span> : 从两个碗中摸到一个水果糖的概率</li>
<li><span><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="14.875" longdesc="__SVG__b0978fe53a31e379a438dd17684e71da" name="e90f18e7-2a18-4ee8-b6c1-11ccc095e783" src="/assets/img/08f8d575b3741d96a0b97eb66284230b" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="45.5"/></span></span></span> : 从1号碗中摸到水果糖的概率，为 0.75</li>
</ol>
<p style="margin: 0 0 1.1em;">假设两个碗是一样的，不考虑摸糖的动作，事件A（即抽到1号碗）的概率 <span><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="14.875" longdesc="__SVG__a900fc42abad5f1a1acd2dcbe8475f20" name="7f315cf8-ee1c-45a9-a1d5-8dae35b60258" src="/assets/img/27a57d901b5e7cb8f2695a2a262b57c7" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="32.375"/></span></span></span> 为 0.5，我们把这个概率称为 <strong style="font-weight: bold;">先验概率</strong>，即根据经验或其他统计信息得到的一个已知概率。</p>
<p style="margin: 0 0 1.1em;"><span><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="14.875" longdesc="__SVG__58c27d7d54c494a3d7e91f398e0e8059" name="7b469519-30b3-40ac-834b-7765c52e3118" src="/assets/img/1674e58cdaa2c3606f43afed4b6c2c04" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="45.5"/></span></span></span> ，即B发生的前提下，A事件的概率，被称为 <strong style="font-weight: bold;">后验概率</strong>，指的是当我们做了一次实验，或观测到新的更具体的数据（事件B，这里是摸到水果糖）后，对 <strong style="font-weight: bold;">先验概率</strong> <span><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="14.875" longdesc="__SVG__a900fc42abad5f1a1acd2dcbe8475f20" name="7f315cf8-ee1c-45a9-a1d5-8dae35b60258" src="/assets/img/27a57d901b5e7cb8f2695a2a262b57c7" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="32.375"/></span></span></span> 进行修正。</p>
<p style="margin: 0 0 1.1em;">剩下的问题就是如何求 <span><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="14.875" longdesc="__SVG__f540bd123ed34dd8062b411239b91955" name="db773a20-17ec-47df-9119-9386e7f6b7a1" src="/assets/img/c1501cf023321ad809be4d36efe64be9" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="32.375"/></span></span></span> 了，它等于抽到第一个碗且从中摸到一颗水果糖的概率，加上抽到第二个碗且从中摸到一颗水果糖的概率。如果称抽到第一个碗为事件A1，第二个碗为A2，则：</p>
</div><div>
<p style="margin: 0 0 1.1em;"></p><div><div style="text-align: center; margin: 1em 0; position: relative; display: block; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%;"><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="14.875" longdesc="__SVG__6a6c3a1d3fb2819de2c24ddc481b24d3" name="df896864-3ea2-48a8-a41e-c1cbc73ce42f" src="/assets/img/c2f909c8beb62e309b2d8bd792c56afb" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="258.125"/></span></span></div></div>
<div><div style="text-align: center; margin: 1em 0; position: relative; display: block; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%;"><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="15.75" longdesc="__SVG__7b4763e4e1e28dd06876431a43b1325d" name="cde1891a-db12-4002-8c45-b1042bc260e6" src="/assets/img/6e6984ff944ea8f19c2ef36a65887cc3" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="261.625"/></span></span></div></div><p style="margin: 0 0 1.1em;"></p>
<p style="margin: 0 0 1.1em;">上式亦即所谓的 <strong style="font-weight: bold;">全概率公式</strong>。</p>
<p style="margin: 0 0 1.1em;">最后由贝叶斯公式，有： <br/>
</p><div><div style="text-align: center; margin: 1em 0; position: relative; display: block; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%;"><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="38.5" longdesc="__SVG__7d768fc5269ccdff06bb0566bab9f50b" name="2b8c0104-b7d0-42ea-8603-959e1e29f611" src="/assets/img/4dfdd1624ab2b3ce967797099fefabcd" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="315.875"/></span></span></div></div><p style="margin: 0 0 1.1em;"></p>
<p style="margin: 0 0 1.1em;">这表明，来自一号碗的概率是0.6。</p>
<p style="margin: 0 0 1.1em;">我们可以看到一个有趣的现象，如果仅选择碗，选中1号的概率是0.5；一旦摸到一颗水果糖，这个概率立刻被增加到0.6，即 <strong style="font-weight: bold;">摸出水果糖这个事件加强了先验概率</strong>。</p>
</div><div>
<h2 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 2.15em; margin: 1.2em 0; text-align: start;">2. 贝叶斯定理的应用</h2>
<p style="margin: 0 0 1.1em;">贝叶斯定理经常被用来计算：<strong style="font-weight: bold;">当观测到某些事实/特征/数据后， 一个推测成立的概率</strong>。</p>
<p style="margin: 0 0 1.1em;">在实际应用中，事件 B 通常是一个已经发生的，可被观测到的数据，而 A 是我们根据事件B提供的数据提出来的一个猜测（假设），后验概率 <span><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="14.875" longdesc="__SVG__58c27d7d54c494a3d7e91f398e0e8059" name="7b469519-30b3-40ac-834b-7765c52e3118" src="/assets/img/1674e58cdaa2c3606f43afed4b6c2c04" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="45.5"/></span></span></span> 可以告诉我们这个猜测有多靠谱。如果有很多可能的猜测，对所有猜测都计算一遍后验概率，就能找到最靠谱的那个。</p>
</div><div>
<h3 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 1.7em; margin: 1.2em 0; text-align: start;">2.1 拼写纠正问题</h3>
<p style="margin: 0 0 1.1em;">拼写纠正器需要解决这样一个问题：</p>
<blockquote style="padding: 15px 20px; margin: 0 0 1.1em; border-left: 5px solid rgba(102,128,153,0.075); border-left-width: 10px; background-color: rgba(102,128,153,0.05); border-top-right-radius: 5px; border-bottom-right-radius: 5px;">
<p style="margin: 0 0 1.1em; font-size: 1em; font-weight: 300; line-height: 1.45; margin-bottom: 0;">当用户输入一个不存在的单词时，他真正是想输入什么单词呢？</p>
</blockquote>
<p style="margin: 0 0 1.1em;">我们可以先从词典中找出所有编辑距离为2的单词作为候选单词，但其中哪个单词概率最大呢？在这个问题中，事件 B 是用户已经输入的单词，我们需要找到这样一个单词，使得以下概率最大：</p>
</div><div>
<p style="margin: 0 0 1.1em;"></p><div><div style="text-align: center; margin: 1em 0; position: relative; display: block; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%;"><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="21.875" longdesc="__SVG__7b61938517b3765f308121b160268734" name="1bb13a98-d90b-41ec-ad3d-cd7863ae1e75" src="/assets/img/4dbb89cd8b2238b9b68b0176381f2e87" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="201.25"/></span></span></div></div><p style="margin: 0 0 1.1em;"></p>
<p style="margin: 0 0 1.1em;">不妨将我们的多个猜测记为 h1 h2 .. （ h 代表 hypothesis），它们都属于一个有限且离散的猜测空间 H （单词总共就那么多而已），将用户实际输入的单词记为 D （Data ，即观测数据），应用贝叶斯公式：</p>
</div><div>
<p style="margin: 0 0 1.1em;"></p><div><div style="text-align: center; margin: 1em 0; position: relative; display: block; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%;"><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="38.5" longdesc="__SVG__60d2dacaba162db0ac043e73741a752a" name="cfe03a8f-4bb5-4b1b-b9ca-386487541b29" src="/assets/img/3aa97e3ba3975e4e6f993fe033b0febf" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="189.875"/></span></span></div></div><p style="margin: 0 0 1.1em;"></p>
<p style="margin: 0 0 1.1em;">求最佳猜测这种场景中，对所有的猜测而言，<span><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="14.875" longdesc="__SVG__e3c0cde0642afebbf423448c4d17ef39" name="96a87c84-4365-494b-8d83-d5fa22d6b637" src="/assets/img/85f4312ec7710ddec24e695f3f42369a" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="34.125"/></span></span></span> 的值都是一定的，我们在比较时可以忽略这个值，得到（符号 ∝ 表示 “正比例于”）：</p>
</div><div>
<p style="margin: 0 0 1.1em;"></p><div><div style="text-align: center; margin: 1em 0; position: relative; display: block; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%;"><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="15.75" longdesc="__SVG__14ad8b672714f16f7d48d342a7fc1721" name="48b41ec1-1f33-46e9-be93-6dc874080794" src="/assets/img/c7269877056cf7f64acf0953c24e1afa" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="183.75"/></span></span></div></div><p style="margin: 0 0 1.1em;"></p>
<p style="margin: 0 0 1.1em;">这个结论非常重要，它意味着对于给定观测数据，一个猜测是好是坏，取决于：</p>
<ol style="margin-top: 0; margin-bottom: 1.1em;"><li><strong style="font-weight: bold;"><span><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="15.75" longdesc="__SVG__527e0f78e3c0913e9a4aa626841ab311" name="42b9a47d-893f-4b49-8edf-06e9e937a3ef" src="/assets/img/f4be7e9dc5ba671edca0e9963b346169" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="30.625"/></span></span></span> 猜测自身独立成立的可能性， 即猜测的<code style="font-family: Source Code Pro,monospace; font-size: .9em; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: normal; border-radius: 4px;">先验概率</code></strong></li>
<li><strong style="font-weight: bold;"><span><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="15.75" longdesc="__SVG__704e042d39e20983636da65deba219b7" name="7d23747e-1e68-4bbb-8c1a-c8679299e9bf" src="/assets/img/e1459613b3e1a471bc6af3bd3a0a28f3" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="45.5"/></span></span></span> 这个猜测下出现观察到的数据的可能性，又称为<code style="font-family: Source Code Pro,monospace; font-size: .9em; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: normal; border-radius: 4px;">似然 Likelihood</code></strong></li>
</ol>
<p style="margin: 0 0 1.1em;">判断一个猜测的质量，往往就是这两个因素的拉锯。</p>
<p style="margin: 0 0 1.1em;">回到问题。对于一个猜测的单词，<code style="font-family: Source Code Pro,monospace; font-size: .9em; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: normal; border-radius: 4px;">先验概率</code> <span><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="15.75" longdesc="__SVG__527e0f78e3c0913e9a4aa626841ab311" name="42b9a47d-893f-4b49-8edf-06e9e937a3ef" src="/assets/img/f4be7e9dc5ba671edca0e9963b346169" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="30.625"/></span></span></span> 指用户实际输入的单词是 h 的概率，这由 h 本身在文本中被使用的频繁程度决定。<code style="font-family: Source Code Pro,monospace; font-size: .9em; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: normal; border-radius: 4px;">似然</code> <span><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="15.75" longdesc="__SVG__704e042d39e20983636da65deba219b7" name="7d23747e-1e68-4bbb-8c1a-c8679299e9bf" src="/assets/img/e1459613b3e1a471bc6af3bd3a0a28f3" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="45.5"/></span></span></span> 指用户想要输入 h，但却输错成了 D 的概率。比如单词 ‘the’ 就比 ‘thaw’ 更容易被打成 ‘thew’，因为 e 和 a 离得较远而且使用的指头相差一个指头（一个是中指一个是小指，不像 e 和 w 使用的指头靠在一块——神经科学的证据表明紧邻的身体设施之间容易串位）。</p>
<p style="margin: 0 0 1.1em;">对所有的候选单词都计算一下 <span><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="15.75" longdesc="__SVG__e83cf6e5e8eb988730e545ba00667214" name="ca0252c2-6e23-4fe6-bd1b-c89f06026e92" src="/assets/img/c4f1f010404d77cbdfd9d1556e11d596" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="94.5"/></span></span></span>，取最大值，就是最靠谱的猜测。</p>
</div><div>
<h4 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 10.5px; margin-bottom: 10.5px; font-size: 1.25em; margin: 1.2em 0; text-align: start;">最大似然 &amp; 奥卡姆剃刀</h4>
<p style="margin: 0 0 1.1em;">最大似然：如果两个猜测的先验概率一样，那么越符合观测数据的猜测（即 <span><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="15.75" longdesc="__SVG__704e042d39e20983636da65deba219b7" name="7d23747e-1e68-4bbb-8c1a-c8679299e9bf" src="/assets/img/e1459613b3e1a471bc6af3bd3a0a28f3" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="45.5"/></span></span></span> 越大）越靠谱；</p>
<p style="margin: 0 0 1.1em;">奥卡姆剃刀：如果两个猜测的似然一样，那么优先选更常见更简单（即 <span><span style="font-size: 100%; display: inline-block; font-style: normal; font-weight: normal; line-height: normal; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0; vertical-align: middle;"><span><img class="en-media" height="15.75" longdesc="__SVG__527e0f78e3c0913e9a4aa626841ab311" name="42b9a47d-893f-4b49-8edf-06e9e937a3ef" src="/assets/img/f4be7e9dc5ba671edca0e9963b346169" style="margin-top: 0; margin-bottom: 0; border: 0; vertical-align: middle; max-width: 100%;" width="30.625"/></span></span></span> 更高）的猜测。</p>
<blockquote style="padding: 15px 20px; margin: 0 0 1.1em; border-left: 5px solid rgba(102,128,153,0.075); border-left-width: 10px; background-color: rgba(102,128,153,0.05); border-top-right-radius: 5px; border-bottom-right-radius: 5px;">
<p style="margin: 0 0 1.1em; font-size: 1em; font-weight: 300; line-height: 1.45; margin-bottom: 1.1em;">最大似然还有另一个问题：即便一个猜测与数据非常符合，也并不代表这个猜测就是更好的猜测，因为这个猜测本身的可能性也许就非常低。比如 MacKay 在《Information Theory : Inference and Learning Algorithms》里面就举了一个很好的例子：-1 3 7 11 你说是等差数列更有可能呢？还是 -X^3 / 11 + 9/11*X^2 + 23/11 每项把前项作为 X 带入后计算得到的数列？此外曲线拟合也是，平面上 N 个点总是可以用 N-1 阶多项式来完全拟合，当 N 个点近似但不精确共线的时候，用 N-1 阶多项式来拟合能够精确通过每一个点，然而用直线来做拟合/线性回归的时候却会使得某些点不能位于直线上。你说到底哪个好呢？多项式？还是直线？一般地说肯定是越低阶的多项式越靠谱（当然前提是也不能忽视“似然”P(D | h) ，明摆着一个多项式分布您愣是去拿直线拟合也是不靠谱的，这就是为什么要把它们两者乘起来考虑。），原因之一就是低阶多项式更常见，先验概率（ P(h) ）较大（原因之二则隐藏在 P(D | h) 里面），这就是为什么我们要用样条 来插值，而不是直接搞一个 N-1 阶多项式来通过任意 N 个点的原因。</p>
<p style="margin: 0 0 1.1em; font-size: 1em; font-weight: 300; line-height: 1.45; margin-bottom: 0;">以上分析当中隐含的哲学是，观测数据总是会有各种各样的误差，比如观测误差（比如你观测的时候一个 MM 经过你一不留神，手一抖就是一个误差出现了），所以如果过分去寻求能够完美解释观测数据的模型，就会落入所谓的数据过配（overfitting） 的境地，一个过配的模型试图连误差（噪音）都去解释（而实际上噪音又是不需要解释的），显然就过犹不及了。所以 P(D | h) 大不代表你的 h （猜测）就是更好的 h。还要看 P(h) 是怎样的。所谓奥卡姆剃刀 精神就是说：如果两个理论具有相似的解释力度，那么优先选择那个更简单的（往往也正是更平凡的，更少繁复的，更常见的）。</p>
</blockquote>
</div><div>
<h3 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 1.7em; margin: 1.2em 0; text-align: start;">2.2 垃圾邮件过滤器</h3></div><div></div></div>